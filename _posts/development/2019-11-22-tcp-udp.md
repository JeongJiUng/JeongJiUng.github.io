---
date: 2019-11-22 01:10:00
layout: post
title: TCP와 UDP
subtitle: 통신 프로토콜
description: >-
  TCP와 UDP의 개념 및 특징
category: development
tags:
  - development
  - tcp
  - udp
  - server
  - network
author: Stop_Male
paginate: true
---

# 개념

## TCP

>  Transmision Control Protocol.
> 네트워크를 통해 순서가 있고 오류가 확인된 정보 패킷을 전달 및 수신하는 방법을 제공.

TCP는 연결형이고 승인을 제공하며 신뢰할 수 있는 다양한 기능을 갖춘 프로토콜로 안정적이지 않은 인터넷 프로토콜(IP) 위에서 애플리케이션이 안정적으로 데이터를 송신하는 방법을 제공한다.

애플리케이션이 데이터를 바이트 스트림으로 보낼 수 있도록 하며, 그 바이트 스트림을 적절한 크기의 세그먼트로 자동 패키징한다. TCP의 특수 슬라이딩 윈도우 체계는 수신자가 모든 데이터를 수신하고, 필요할 경우 재전송을 하며, 상대방의 송신 속도를 조절할 수 있는 흐름 제어 기능을 제공한다.

## TCP 구조

![image](https://github.com/JeongJiUng/jeongjiung.github.io/blob/master/_images/223C0D4957286ABC24.png?raw=true, tcp 구조)

**source port** : 패킷을 송신하는 시스템의 포트번호를 나타낸다. 클라이언트의 경우 예약된 0 ~ 1023의 well-known 포트 번호를 제외한 번호를 임의로 생성하고, 서버의 경우 일반적인 서비스 제공 시 well-known한 포트를 사용한다.

**destination port** : 패킷을 수신할 시스템의 포트번호를 나타낸다.

**sequence number** : 세그먼트(각 계층 패킷의 구분을 위해 4계층-세그먼트, 3계층-패킷, 2계층-프레임으로 구분) 데이터의 순서번호를 표기한다. 3Way-handshacking 수행 시 ISN의 기능도 한다.

**acknowledge number** : 상대방으로부터 수신한 데이터의 바로 다음에 수신할 데이터 순서번호를 나타낸다. sequence number의 확인 응답으로서 데이터 전송자에게 패킷을 잘 받았으니 그다음 패킷을 송신하라는 의미로 사용된다. 상대방이 다음에 전송할 패킷의 sequence number이기도 하다.

**header length** : TCP 헤더의 전체 길이를 byte 단위로 표현한다.

**reserved** : 미래를 위해 예약된 필드로 항상 0으로 설정.

**window size** : 송신 시스템에서 자신이 수용하는 한 버퍼의 크기를 byte 단위로 나타낸다. 통신하는 동안 송수신자는 해당 필드를 통해 수신사이즈를 계속 변경한다.

**checksum** : 데이터가 전송중에 손실되지 않고 원본과 동일한지 검사한다.

**urgent point** : urgent flag 설정 시 urgent 데이터의 마지막 byte의 일련번호를 urgent point 필드에 저장한다. 해당 부분까지 긴급하게 처리를 요한다는 의미이다.



## TCP의 기능

1. 주소지정 / 다중화
   * 여러 프로세스에서 온 데이터를 다중화하여 하위 네트워크 계층 프로토콜로 송신되도록 하는 것은 TCP의 중요한 임무이며 동시에 이들 상위 계층 애플리케이션은 TCP 포틀르 통해 식별된다.
2. 연결 수립, 유지, 종료
   * TCP는 장비가 데이터를 이동시킬 수 있는 연결을 협상하고 수립하기 위해 따라야 할 절차 모음을 제공한다. 연결이 수립되면 TCP는 연결을 유지하고 혹시 발생할 지 모르는 문제를 처리하기 위한 방법이 있다. 장비가 TCP 연결로 할 일을 마치면 그 연결을 종료하기 위한 특수한 절차도 수행한다.
3. 데이터 처리와 패키징
   * 애플리케이션이 상위 계층에서 데이터를 송신할 수 있는 방법을 제공한다. 이 데이터는 메시지로 패키징되고 목적지 TCP 소프트웨어로 전달된다.
4. 데이터 전송
   * 송신 장비의 TCP 구현은 패키징된 데이터를 다른 장비의 TCP 프로세스로 전달할 책임이 있다.
5. 신뢰성과 전송 품질 서비스 제공
   * 애플리케이션이 데이터를 신뢰할 수 있게 송신할 수 있도록 여러 서비스와 기능을 제공한다.
6. 흐름 제어와 혼잡 회피 기능 제공
   * 두 장비 간의 데이터 흐름을 제어하고 관리할 수 있도록 하며, 두 장비 간 통신에서 발생할 수 있는 혼잡을 처리하는 기능도 포함된다.